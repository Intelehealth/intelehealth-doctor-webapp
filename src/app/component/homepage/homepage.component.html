<mat-spinner *ngIf="setSpiner" [diameter]="70"></mat-spinner>
<div class="container" [ngClass]="setSpiner ? 'spin' : ''">
  <div class="modal-body row">
    <div class="col-sm-3" style="padding: 3px">
      <div class="card text-white" style="background: #dd3c62">
        <div class="card-body">
          <div class="text-left">
            PRIORITY VISITS<span
              class="text-right badge badge-light count-label"
              >{{ flagPatientNo }}</span
            >
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-3" style="padding: 3px">
      <div class="card text-white" style="background: #f6b825">
        <div class="card-body">
          <div class="text-left">
            AWAITING CONSULT<span
              class="text-right badge badge-light count-label"
              >{{ activePatient }}</span
            >
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-3" style="padding: 3px">
      <div class="card text-white" style="background: #17a2b8">
        <div class="card-body">
          <div class="text-left">
            VISITS IN PROGRESS<span
              class="text-right badge badge-light count-label"
              >{{ visitNoteNo }}</span
            >
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-3" style="padding: 3px">
      <div class="card text-white" style="background: #4fca8b">
        <div class="card-body">
          <div class="text-left">
            COMPLETED VISITS<span
              class="text-right badge badge-light count-label"
              >{{ totalCompletedVisits }}</span
            >
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-3" style="padding: 3px">
      <div class="card text-white" style="background: #410685">
          <div class="card-body">
              <div class="text-left">
                  FOLLOW UP VISITS<span class="text-right badge badge-light count-label" *ngIf="followUpVisitNo > 0">{{
                      followUpVisitNo
                      }}</span>
              </div>
          </div>
      </div>
  </div>
  </div>

  <!-- PRIORITY Visit -->
  <mat-accordion class="example-headers-align" [multi]="true">
    <mat-expansion-panel [expanded]="flagPatientNo > 0" id="flagged-table">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h5>
            PRIORITY VISITS
            <b>({{ flagPatientNo }})</b>
          </h5>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngIf="flagVisit.length > 0">
        <app-tables
          [visitCounts]="flagPatientNo"
          [tableFor]="'flagVisit'"
          (tableEmitter)="tableChange($event)"
          (emptyRow)="loadNextSlot($event)"
          [data]="flagVisit"
          [allVisitsLoaded]="allVisitsLoaded"
        ></app-tables>
      </ng-container>
    </mat-expansion-panel>

    <!-- Queue Visit table -->
    <mat-expansion-panel [expanded]="activePatient > 0" id="queued-table">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h5>
            AWAITING CONSULT
            <b>({{ activePatient }})</b>
          </h5>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngIf="waitingVisit.length > 0">
        <app-tables
          [visitCounts]="activePatient"
          [tableFor]="'waitingVisit'"
          (tableEmitter)="tableChange($event)"
          [data]="waitingVisit"
          (emptyRow)="loadNextSlot($event)"
          [allVisitsLoaded]="allVisitsLoaded"
        ></app-tables>
      </ng-container>
    </mat-expansion-panel>

    <!-- In Progress Visit -->
    <mat-expansion-panel [expanded]="visitNoteNo > 0" id="visit-in-progress">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h5>
            VISITS IN PROGRESS
            <b>({{ visitNoteNo }})</b>
          </h5>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngIf="progressVisit.length > 0">
        <app-tables
          [visitCounts]="visitNoteNo"
          [tableFor]="'progressVisit'"
          (tableEmitter)="tableChange($event)"
          [data]="progressVisit"
          (emptyRow)="loadNextSlot($event)"
          [allVisitsLoaded]="allVisitsLoaded"
        ></app-tables>
      </ng-container>
    </mat-expansion-panel>

    <!-- Complete Visit -->
    <mat-expansion-panel [expanded]="completeVisitNo > 0" id="visit-complete">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <h5>
            COMPLETED VISITS
            <b>({{ completeVisitNo }})</b>
          </h5>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngIf="completedVisit.length > 0">
        <app-tables
          [visitCounts]="completeVisitNo"
          [tableFor]="'completedVisit'"
          (tableEmitter)="tableChange($event)"
          [data]="completedVisit"
          (emptyRow)="loadNextSlot($event)"
          [allVisitsLoaded]="allVisitsLoaded"
        ></app-tables>
      </ng-container>
    </mat-expansion-panel>

    <!-- Follow up visits-->
    <mat-expansion-panel (opened)="getFollowUpdVisits()" id="followUp-visit">
      <mat-expansion-panel-header>
          <mat-panel-title>
              <h5>FOLLOW UP VISITS <b *ngIf="followUpVisitNo > 0">({{followUpVisitNo}})</b></h5>
          </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngIf="followUpVisit.length > 0">
          <app-tables 
          [visitCounts]="followUpVisitNo"
          [tableFor]="'followUpVisit'"
          (tableEmitter)="tableChange($event)"
          [data]="followUpVisit"
          (emptyRow)="loadNextSlot($event)"
          [allVisitsLoaded]="allVisitsLoaded"></app-tables>
      </ng-container>
      <ng-container *ngIf="setSpiner1">
        <mat-spinner [diameter]="30"></mat-spinner>
      </ng-container>
  </mat-expansion-panel>
  </mat-accordion>
</div>
